server:
  port: ${APP_PORT:8080}
  servlet:
    context-path: ${CONTEXT_PATH:/api/v1.0/base}

spring-boot:
  version; 4.0.1

application:
  title: api-base-hexagonal
  version: 1.0.0

spring:
  application:
    name: base-hexagonal
  datasource:
    hikari:
      register-mbeans: true


database:
  postgres:
    hibernate:
      show_sql: false
      hbm2ddl:
        auto: none
      dialect: org.hibernate.dialect.PostgreSQLDialect
    jpa:
      properties:
        hibernate:
          proc:
            param_null_passing: false
    driverClassName: org.postgresql.Driver
    url: jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DATABSE}
    user: ${POSTGRES_USER}
    pass: ${POSTGRES_PASSWORD}
    hikari:
      maximum-pool-size: ${DATABASE_MAXIMUM_POOL_SIZE}
      minimum-idle: ${DATABASE_MANIMUM_POOL_SIZE}
      idle-timeout: ${DATABASE_IDLE_TIMEOUT}
      max-lifetime: ${DATABASE_MAX_LIFE_TIMEOUT}
      connection-timeout: ${DATABASE_CONNECTION_TIMEOUT}
      keepaliveTime: ${DATABASE_KEEP_ALIVE_TIME}
      validationTimeout: ${DATABASE_VALIDATION_TIMEOUT}
      leakDetectionThreshold: ${DATABASE_LEAKDETECTIONTHRESHOLD}


management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info,prometheus

  endpoint:
    health:
      show-details: when_authorized
      probes:
        enabled: true

  metrics:
    tags:
      application: flight-service
      environment: prod

    enable:
      jvm: true
      system: true
      logback: true
      tomcat: true
      hikaricp: true

    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5,0.9,0.95,0.99
      slo:
        http.server.requests: 100ms,250ms,500ms,1s,2s,3s

    web:
      server:
        request:
          autotime:
            enabled: true
